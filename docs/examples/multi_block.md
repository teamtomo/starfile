# multiple data block example

In this example, we will use *starfile* to read and write a file containing multiple data blocks.

```txt title="postprocess.star"
# RELION postprocess; version 3.0.8
# --i average_symmetrized_ref_001_ite_0008.mrc --i2 average_symmetrized_ref_002_ite_0008.mrc --o combined --mask mask.mrc --angpix 7.5 

data_general

_rlnFinalResolution                        16.363636
_rlnBfactorUsedForSharpening                0.000000
_rlnUnfilteredMapHalf1                  average_symmetrized_ref_001_ite_0008.mrc
_rlnUnfilteredMapHalf2                  average_symmetrized_ref_002_ite_0008.mrc
_rlnMaskName                            mask.mrc
_rlnRandomiseFrom                          32.727273
 

data_fsc

loop_ 
_rlnSpectralIndex #1 
_rlnResolution #2 
_rlnAngstromResolution #3 
_rlnFourierShellCorrelationCorrected #4 
_rlnFourierShellCorrelationUnmaskedMaps #5 
_rlnFourierShellCorrelationMaskedMaps #6 
_rlnCorrectedFourierShellCorrelationPhaseRandomizedMaskedMaps #7 
           0     0.001001   999.000000     1.000000     1.000000     1.000000     1.000000 
           1     0.001389   720.000000     0.999943     0.999883     0.999943     0.999964 
           2     0.002778   360.000000     0.999902     0.998804     0.999902     0.999856 
           3     0.004167   240.000000     0.999557     0.999146     0.999557     0.999421 
           4     0.005556   180.000000     0.998837     0.995760     0.998837     0.998708 
           5     0.006944   144.000000     0.996670     0.970256     0.996670     0.996230 
           6     0.008333   120.000000     0.998519     0.995123     0.998519     0.998394 
           7     0.009722   102.857143     0.998016     0.993888     0.998016     0.997970 
           8     0.011111    90.000000     0.993449     0.932522     0.993449     0.993432 
           9     0.012500    80.000000     0.997430     0.986117     0.997430     0.997262 
          10     0.013889    72.000000     0.996930     0.975178     0.996930     0.996852 
          11     0.015278    65.454545     0.994417     0.953346     0.994417     0.994411 
          12     0.016667    60.000000     0.997267     0.982296     0.997267     0.997122 
          13     0.018056    55.384615     0.997533     0.989654     0.997533     0.997543 
          14     0.019444    51.428571     0.996960     0.982952     0.996960     0.996947 
          15     0.020833    48.000000     0.993096     0.939997     0.993096     0.993031 
          16     0.022222    45.000000     0.991521     0.916270     0.991521     0.991476 
          17     0.023611    42.352941     0.995683     0.985476     0.995683     0.995850 
          18     0.025000    40.000000     0.993924     0.974596     0.993924     0.993874 
          19     0.026389    37.894737     0.988327     0.910503     0.988327     0.988183 
          20     0.027778    36.000000     0.986295     0.949048     0.986295     0.985420 
          21     0.029167    34.285714     0.972487     0.869522     0.972487     0.957604 
          22     0.030556    32.727273     0.954182     0.791619     0.954182     0.695740 
          23     0.031944    31.304348     0.954472     0.805134     0.954472     0.409996 
          24     0.033333    30.000000     0.830088     0.673628     0.912479     0.484903 
          25     0.034722    28.800000     0.688060     0.413451     0.880461     0.616788 
          26     0.036111    27.692308     0.428696     0.232438     0.785818     0.625099 
          27     0.037500    26.666667     0.513542     0.153006     0.799531     0.587901 
          28     0.038889    25.714286     0.433621     0.066879     0.704565     0.478380 
          29     0.040278    24.827586     0.422082     0.082131     0.701157     0.482896 
          30     0.041667    24.000000     0.514131     0.079264     0.728610     0.441433 
          31     0.043056    23.225806     0.421146     0.074106     0.643519     0.384161 
          32     0.044444    22.500000     0.331326     0.035711     0.579437     0.371050 
          33     0.045833    21.818182     0.569022     0.087912     0.699586     0.302947 
          34     0.047222    21.176471     0.494601     0.049764     0.614495     0.237226 
          35     0.048611    20.571429     0.464035     0.037915     0.572139     0.201699 
          36     0.050000    20.000000     0.586620     0.087138     0.660118     0.177798 
          37     0.051389    19.459459     0.461414     0.081119     0.558778     0.180779 
          38     0.052778    18.947368     0.358619     0.048188     0.475659     0.182481 
          39     0.054167    18.461538     0.454936     0.061948     0.544652     0.164597 
          40     0.055556    18.000000     0.328598     0.048262     0.414474     0.127906 
          41     0.056944    17.560976     0.167164     0.044458     0.262415     0.114370 
          42     0.058333    17.142857     0.167276     0.046339     0.263249     0.115252 
          43     0.059722    16.744186     0.167596     0.056424     0.246272     0.094516 
          44     0.061111    16.363636     0.160329     0.028203     0.230352     0.083393 
          45     0.062500    16.000000     0.135687     0.016185     0.212606     0.088994 
          46     0.063889    15.652174     0.173383     0.039663     0.236286     0.076097 
          47     0.065278    15.319149     0.240980     0.055721     0.319111     0.102936 
          48     0.066667    15.000000     0.282401     0.067334     0.371575     0.124267 
 

data_guinier

loop_ 
_rlnResolutionSquared #1 
_rlnLogAmplitudesOriginal #2 
_rlnLogAmplitudesWeighted #3 
    0.000000     -4.73796     -4.73796 
1.929012e-06     -4.51668     -4.51670 
7.716049e-06     -5.68730     -5.68733 
1.736111e-05     -5.57531     -5.57542 
3.086420e-05     -6.27385     -6.27414 
4.822531e-05     -6.95137     -6.95220 
6.944444e-05     -6.31967     -6.32004 
9.452160e-05     -6.30588     -6.30637 
1.234568e-04     -7.06121     -7.06286 
1.562500e-04     -6.96474     -6.96539 
1.929012e-04     -7.03462     -7.03539 
2.334105e-04     -7.00008     -7.00148 
2.777778e-04     -6.59948     -6.60016 
3.260031e-04     -6.56917     -6.56978 
3.780864e-04     -6.78012     -6.78088 
4.340278e-04     -7.13177     -7.13350 
4.938272e-04     -7.26311     -7.26524 
5.574846e-04     -6.80471     -6.80579 
6.250000e-04     -7.04173     -7.04326 
6.963735e-04     -7.49639     -7.49933 
7.716049e-04     -7.48171     -7.48518 
8.506944e-04     -7.90641     -7.91343 
9.336420e-04     -8.12326     -8.13512 
    0.001020     -8.11704     -8.12882 
    0.001111     -8.28560     -8.33432 
    0.001206     -8.54967     -8.65182 
    0.001304     -8.71634     -8.97165 
    0.001406     -8.78059     -8.97446 
    0.001512     -8.87519     -9.12651 
    0.001622     -8.90205     -9.16281 
    0.001736     -8.93978     -9.13326 
    0.001854     -8.96965     -9.23119 
    0.001975     -9.03550     -9.38434 
    0.002101     -9.03460     -9.19517 
    0.002230     -9.09791     -9.30427 
    0.002363     -9.14635     -9.37427 
    0.002500     -9.15563     -9.30655 
    0.002641     -9.20649     -9.43635 
    0.002785     -9.26586     -9.58526 
    0.002934     -9.30430     -9.53901 
    0.003086     -9.36021     -9.71216 
    0.003243     -9.41174    -10.03684 
    0.003403     -9.45067    -10.07549 
    0.003567     -9.47943    -10.10343 
    0.003735     -9.54569    -10.18873 
    0.003906     -9.60884    -10.32459 
    0.004082     -9.63651    -10.24601 
    0.004261     -9.66694    -10.13984 
    0.004444    -10.10128    -10.51129 
```

## Reading
Reading a file with multiple data blocks is similar to reading a file with a single data block.
In this case, a dictionary of data is returned. The keys of this dictionary are the names
of each data block.

```python
import starfile

star = starfile.read('particles.star')
df_optics = star['optics']
df_particles = star['particles']
```

!!! tip
    
    `starfile.read` can be forced to always return a dictionary of dataframes.

    ```python
    starfile.read('particles.star', force_dict=True)
    ```

## Writing
Writing a file containing multiple data blocks is similar, simply pass a dictionary of data blocks.

```python
import starfile

# prepare a dictionary of data blocks
star = {
    'optics': df_optics,
    'particles': df_particles,
}

# write the file
starfile.write(star, filename='new_file.star')
```

